# HummingBot é…ç½®ç”Ÿæˆå™¨

ä¸€ä¸ªç”¨äºç®¡ç†å¤šä¸ª HummingBot æœåŠ¡å™¨é…ç½®çš„æ¨¡å—åŒ–å·¥å…·é›†ã€‚

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

- **å¤šæœåŠ¡å™¨æ”¯æŒ**: ä¸ºä¸åŒçš„æœåŠ¡å™¨åˆ›å»ºç‹¬ç«‹çš„é…ç½®æ–‡ä»¶å¤¹
- **æ¨¡å—åŒ–è®¾è®¡**: ä½¿ç”¨ bash æ¨¡å—åŒ–æ¶æ„ï¼Œä»£ç å¯å¤ç”¨ã€æ˜“ç»´æŠ¤
- **è‡ªåŠ¨åŒ–é…ç½®**: ä» CSV æ–‡ä»¶è‡ªåŠ¨ç”Ÿæˆ HummingBot é…ç½®æ–‡ä»¶
- **Docker é›†æˆ**: æ”¯æŒ Docker Compose ç®¡ç†å¤šä¸ªæœºå™¨äººå®¹å™¨
- **tmux ç®¡ç†**: ä½¿ç”¨ tmux ç®¡ç†å¤šä¸ªæœºå™¨äººä¼šè¯
- **å»¶è¿Ÿå¯åŠ¨**: æ”¯æŒæœºå™¨äººåˆ†æ‰¹å¯åŠ¨ï¼ˆé»˜è®¤3åˆ†é’Ÿé—´éš”ï¼‰ï¼Œé¿å…èµ„æºå†²çª

## ğŸ“ é¡¹ç›®ç»“æ„

```
hummingbot-prepare/
â”œâ”€â”€ lib/                          # æ¨¡å—åº“
â”‚   â”œâ”€â”€ common.sh                 # é€šç”¨å‡½æ•°åº“
â”‚   â”œâ”€â”€ docker.sh                 # Docker ç›¸å…³å‡½æ•°
â”‚   â””â”€â”€ config.sh                 # é…ç½®ç®¡ç†å‡½æ•°
â”œâ”€â”€ start-bot.sh                  # æœºå™¨äººå¯åŠ¨è„šæœ¬ï¼ˆå»¶è¿Ÿå¯åŠ¨ï¼‰
â”œâ”€â”€ stop-pending.sh               # å»¶è¿Ÿä»»åŠ¡æ¸…ç†è„šæœ¬
â”œâ”€â”€ bot-cmd.sh                    # æœºå™¨äººå‘½ä»¤æ‰§è¡Œè„šæœ¬
â”œâ”€â”€ bot-manager.sh                # æœºå™¨äººç®¡ç†å·¥å…·
â”œâ”€â”€ setup-ex-bot.sh               # æœåŠ¡å™¨ç¯å¢ƒæ­å»ºè„šæœ¬
â”œâ”€â”€ deploy.sh                     # é…ç½®éƒ¨ç½²è„šæœ¬
â”œâ”€â”€ prepare.py                    # é…ç½®ç”Ÿæˆè„šæœ¬
â”œâ”€â”€ templates/                    # æ¨¡æ¿æ–‡ä»¶å¤¹
â”œâ”€â”€ ads_31/                       # æœåŠ¡å™¨1é…ç½®
â”‚   â”œâ”€â”€ bots.csv
â”‚   â”œâ”€â”€ strategy.csv
â”‚   â””â”€â”€ strategies-v1.csv
â””â”€â”€ ads_32/                       # æœåŠ¡å™¨2é…ç½®
    â”œâ”€â”€ bots.csv
    â”œâ”€â”€ strategy.csv
    â””â”€â”€ strategies-v1.csv
```

## ğŸ› ï¸ å®‰è£…å’Œä½¿ç”¨

### 1. å…‹éš†ä»“åº“

```bash
git clone <repository-url>
cd hummingbot-prepare
```

### 2. è®¾ç½®æƒé™

```bash
chmod +x lib/*.sh
chmod +x start-bot.sh
chmod +x stop-pending.sh
chmod +x bot-cmd.sh
chmod +x bot-manager.sh
chmod +x setup-ex-bot.sh
chmod +x deploy.sh
```

### 3. åˆ›å»ºé…ç½®æ–‡ä»¶å¤¹

ä¸ºæ¯ä¸ªæœåŠ¡å™¨åˆ›å»ºé…ç½®æ–‡ä»¶å¤¹ï¼Œä¾‹å¦‚ï¼š

```bash
mkdir ads_31
mkdir ads_32
```

### 4. å‡†å¤‡é…ç½®æ–‡ä»¶

åœ¨æ¯ä¸ªé…ç½®æ–‡ä»¶å¤¹ä¸­æ”¾ç½®ä»¥ä¸‹æ–‡ä»¶ï¼š

- `bots.csv` - æœºå™¨äººåŸºæœ¬ä¿¡æ¯
- `strategy.csv` - v2 ç­–ç•¥é…ç½®
- `strategies-v1.csv` - v1 ç­–ç•¥é…ç½®ï¼ˆå¯é€‰ï¼‰

### 5. è¿è¡Œé…ç½®ç”Ÿæˆ

```bash
# ç”Ÿæˆ ads_31 çš„é…ç½®
python prepare.py ads_31

# ç”Ÿæˆ ads_32 çš„é…ç½®
python prepare.py ads_32
```

### 6. æœåŠ¡å™¨ç¯å¢ƒæ­å»º

ä½¿ç”¨ `setup-ex-bot.sh` è„šæœ¬å¿«é€Ÿæ­å»ºæœåŠ¡å™¨ç¯å¢ƒï¼š

```bash
# æ­å»ºæœåŠ¡å™¨ç¯å¢ƒï¼ˆéœ€è¦æœåŠ¡å™¨IPå’Œç”¨æˆ·åï¼‰
./setup-ex-bot.sh 192.168.1.31 ubuntu
```

è¯¥è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- å¤åˆ¶SSHå¯†é’¥åˆ°æœåŠ¡å™¨
- æ‹‰å–ex-botä»£ç 
- å®‰è£…Dockerå’ŒatæœåŠ¡
- é…ç½®ç”¨æˆ·æƒé™

### 7. é…ç½® SSH è¿æ¥

åœ¨ `~/.ssh/config` æ–‡ä»¶ä¸­é…ç½®æœåŠ¡å™¨è¿æ¥ä¿¡æ¯ï¼š

```bash
# ç¼–è¾‘ SSH é…ç½®
nano ~/.ssh/config

# æ·»åŠ æœåŠ¡å™¨é…ç½®ï¼ˆä¸»æœºåå¿…é¡»ä¸é…ç½®æ–‡ä»¶å¤¹åç›¸åŒï¼‰
Host ads_31
    HostName 192.168.1.31
    User ubuntu
    Port 22
    IdentityFile ~/.ssh/id_ed25519

Host ads_32
    HostName 192.168.1.32
    User ubuntu
    Port 22
    IdentityFile ~/.ssh/id_ed25519
```

### 8. éƒ¨ç½²é…ç½®

```bash
# éƒ¨ç½² ads_31 é…ç½®ï¼ˆSSHé…ç½®ä¸­çš„ä¸»æœºåå¿…é¡»ä¸é…ç½®æ–‡ä»¶å¤¹åç›¸åŒï¼‰
./deploy.sh ads_31
```

éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- æ£€æŸ¥æœ¬åœ°é…ç½®æ–‡ä»¶å¤¹å’Œå¿…è¦æ–‡ä»¶
- æµ‹è¯•SSHè¿æ¥
- ä¸Šä¼  `conf/` ç›®å½•åˆ° `~/ex-bot/conf/`
- ä¸Šä¼  `docker-compose.override.yml` åˆ° `~/ex-bot/`
- ä¸Šä¼  `start-bot.sh`ã€`stop-pending.sh`ã€`bot-cmd.sh` å’Œ `bot-manager.sh` åˆ° `~/`

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### æœºå™¨äººå¯åŠ¨è„šæœ¬

åœ¨æœåŠ¡å™¨ä¸Šä½¿ç”¨ `start-bot.sh` å¯åŠ¨æœºå™¨äººï¼š

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œï¼ˆéœ€è¦å…ˆéƒ¨ç½²é…ç½®ï¼‰
ssh ads_31
cd ~
./start-bot.sh
```

è¯¥è„šæœ¬ä¼šï¼š
- è¯»å– `~/ex-bot/docker-compose.override.yml` ä¸­çš„æœåŠ¡åˆ—è¡¨
- æ¯éš”3åˆ†é’Ÿå¯åŠ¨ä¸€ä¸ªæœºå™¨äººï¼ˆé¿å…èµ„æºå†²çªï¼‰
- ä½¿ç”¨tmuxç®¡ç†æœºå™¨äººä¼šè¯
- æ”¯æŒå»¶è¿Ÿå¯åŠ¨è°ƒåº¦

### å»¶è¿Ÿä»»åŠ¡ç®¡ç†

ä½¿ç”¨ `stop-pending.sh` ç®¡ç†å»¶è¿Ÿå¯åŠ¨ä»»åŠ¡ï¼š

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
ssh ads_31
cd ~

# åˆ—å‡ºæ‰€æœ‰å¾…æ‰§è¡Œçš„å¯åŠ¨ä»»åŠ¡
./stop-pending.sh --list

# åœæ­¢æŒ‡å®šæœºå™¨äººçš„å¯åŠ¨ä»»åŠ¡
./stop-pending.sh --bot bot2

# åœæ­¢æ‰€æœ‰å¾…æ‰§è¡Œçš„å¯åŠ¨ä»»åŠ¡
./stop-pending.sh --all
```

### æœºå™¨äººç®¡ç†å·¥å…·

ä½¿ç”¨ `bot-manager.sh` è¿›è¡Œå…¨é¢çš„æœºå™¨äººç®¡ç†ï¼š

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
ssh ads_31
cd ~

# å¯åŠ¨æŒ‡å®šæœºå™¨äºº
./bot-manager.sh start bot1

# åœæ­¢æŒ‡å®šæœºå™¨äºº
./bot-manager.sh stop bot1

# å¯åŠ¨æ‰€æœ‰æœªè¿è¡Œçš„æœºå™¨äºº
./bot-manager.sh start-all

# åœæ­¢æ‰€æœ‰è¿è¡Œçš„æœºå™¨äºº
./bot-manager.sh stop-all

# é‡å¯æŒ‡å®šæœºå™¨äºº
./bot-manager.sh restart bot1

# é‡å¯æ‰€æœ‰æœºå™¨äºº
./bot-manager.sh restart-all

# æŸ¥çœ‹æ‰€æœ‰æœºå™¨äººçŠ¶æ€
./bot-manager.sh status

# æŸ¥çœ‹æŒ‡å®šæœºå™¨äººçŠ¶æ€
./bot-manager.sh status bot1

# å‘æ‰€æœ‰è¿è¡Œä¸­çš„æœºå™¨äººå‘é€å‘½ä»¤
./bot-manager.sh cmd stop

# å‘æŒ‡å®šæœºå™¨äººå‘é€å‘½ä»¤
./bot-manager.sh cmd bot1 restart

# åˆ—å‡ºæ‰€æœ‰æœºå™¨äºº
./bot-manager.sh list

# æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
./bot-manager.sh help
```

### æœºå™¨äººå‘½ä»¤æ‰§è¡Œ

ä½¿ç”¨ `bot-cmd.sh` å‘æœºå™¨äººå‘é€å‘½ä»¤ï¼š

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
ssh ads_31
cd ~

# åœæ­¢æ‰€æœ‰æœºå™¨äºº
./bot-cmd.sh stop

# é‡å¯æ‰€æœ‰æœºå™¨äºº
./bot-cmd.sh restart

# æŸ¥çœ‹æ‰€æœ‰æœºå™¨äººæ—¥å¿—
./bot-cmd.sh logs

# æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
./bot-cmd.sh --help
```


## ğŸ“‹ é…ç½®æ–‡ä»¶æ ¼å¼

### bots.csv

```csv
name,config_file_name,script_config,proxy,connector,api_key,secret_key,password
bot1,v2_with_controllers.py,conf_v2_ads_1_apt.yml,,backpack_perpetual,your_api_key,your_secret_key,your_password
bot2,conf_v1_ads_23_doge.yml,,,backpack_perpetual,your_api_key,your_secret_key,your_password
```

### strategy.csv

```csv
market,version,amount,buy_spreads
BTC,0.1,2000,"1.6,2.4,3.3"
APT,0.2,1500,"2.0,3.0,4.0"
```

### strategies-v1.csv

```csv
version,market,order_amount,leverage,bid_spread,ask_spread
ads_20,APT,60,10,0.08,0.08
ads_21,DOGE,100,5,0.05,0.05
```

## ğŸ”„ å®Œæ•´å·¥ä½œæµç¨‹

### 1. ç¯å¢ƒå‡†å¤‡
```bash
# 1. æ­å»ºæœåŠ¡å™¨ç¯å¢ƒ
./setup-ex-bot.sh 192.168.1.31 ubuntu

# 2. é…ç½®SSHè¿æ¥
# ç¼–è¾‘ ~/.ssh/config æ–‡ä»¶
```

### 2. é…ç½®ç”Ÿæˆå’Œéƒ¨ç½²
```bash
# 3. ç”Ÿæˆé…ç½®æ–‡ä»¶
python prepare.py ads_31

# 4. éƒ¨ç½²åˆ°æœåŠ¡å™¨
./deploy.sh ads_31
```

### 3. æœºå™¨äººç®¡ç†
```bash
# 5. è¿æ¥åˆ°æœåŠ¡å™¨
ssh ads_31

# 6. å¯åŠ¨æœºå™¨äººï¼ˆå»¶è¿Ÿå¯åŠ¨ï¼‰
./start-bot.sh

# 7. ç®¡ç†å»¶è¿Ÿä»»åŠ¡ï¼ˆå¦‚éœ€è¦ï¼‰
./stop-pending.sh --list
./stop-pending.sh --all  # åœæ­¢æ‰€æœ‰å»¶è¿Ÿä»»åŠ¡
```

## ğŸ”§ æ¨¡å—åŒ–æ¶æ„

### lib/common.sh
- å½©è‰²è¾“å‡ºå‡½æ•°
- æ–‡ä»¶/ç›®å½•æ£€æŸ¥
- CSV æ•°æ®è¯»å–
- tmux ä¼šè¯ç®¡ç†

### lib/docker.sh
- å®¹å™¨å¯åŠ¨/åœæ­¢/é‡å¯
- å®¹å™¨çŠ¶æ€æ£€æŸ¥
- Docker Compose é›†æˆ

### lib/config.sh
- é…ç½®æ–‡ä»¶å¤¹éªŒè¯
- å¿…è¦æ–‡ä»¶æ£€æŸ¥
- è„šæœ¬æ‰§è¡Œç®¡ç†

### æ ¸å¿ƒè„šæœ¬åŠŸèƒ½

#### start-bot.sh
- è¯»å–docker-compose.override.ymlä¸­çš„æœåŠ¡åˆ—è¡¨
- å®ç°å»¶è¿Ÿå¯åŠ¨æœºåˆ¶ï¼ˆ3åˆ†é’Ÿé—´éš”ï¼‰
- ä½¿ç”¨tmuxç®¡ç†æœºå™¨äººä¼šè¯
- æ”¯æŒatå‘½ä»¤è°ƒåº¦å»¶è¿Ÿä»»åŠ¡

#### stop-pending.sh
- ç®¡ç†å»¶è¿Ÿå¯åŠ¨ä»»åŠ¡
- æ”¯æŒåˆ—å‡ºã€åœæ­¢æŒ‡å®šæœºå™¨äººæˆ–æ‰€æœ‰ä»»åŠ¡
- æ¸…ç†ä¸´æ—¶è„šæœ¬æ–‡ä»¶
- ä¸atå‘½ä»¤é›†æˆ

#### deploy.sh
- è‡ªåŠ¨æ£€æŸ¥æœ¬åœ°é…ç½®å®Œæ•´æ€§
- æµ‹è¯•SSHè¿æ¥
- ä½¿ç”¨rsyncå’Œscpä¸Šä¼ æ–‡ä»¶
- æ”¯æŒå¤šæ–‡ä»¶ç±»å‹éƒ¨ç½²

#### setup-ex-bot.sh
- è‡ªåŠ¨åŒ–æœåŠ¡å™¨ç¯å¢ƒæ­å»º
- SSHå¯†é’¥é…ç½®
- Dockerå’ŒatæœåŠ¡å®‰è£…
- ç”¨æˆ·æƒé™é…ç½®

#### bot-manager.sh
- å…¨é¢çš„æœºå™¨äººç®¡ç†å·¥å…·
- æ”¯æŒå¯åŠ¨/åœæ­¢æŒ‡å®šæœºå™¨äººæˆ–æ‰€æœ‰æœºå™¨äºº
- å®æ—¶çŠ¶æ€æŸ¥çœ‹å’Œç›‘æ§
- é›†æˆå‘½ä»¤å‘é€åŠŸèƒ½
- æ™ºèƒ½æœºå™¨äººå‘ç°å’ŒéªŒè¯

#### bot-cmd.sh
- å‘æœºå™¨äººå‘é€å‘½ä»¤çš„ä¸“ç”¨å·¥å…·
- æ”¯æŒå‘æ‰€æœ‰æˆ–æŒ‡å®šæœºå™¨äººå‘é€å‘½ä»¤
- ä¸tmuxä¼šè¯é›†æˆ
- ç®€åŒ–çš„å‘½ä»¤æ‰§è¡Œæ¥å£

## ğŸ³ Docker æ”¯æŒ

é¡¹ç›®æ”¯æŒ Docker Compose ç®¡ç†å¤šä¸ªæœºå™¨äººå®¹å™¨ï¼š

```yaml
services:
  bot1:
    container_name: bot1
    # ... é…ç½®
  bot2:
    container_name: bot2
    # ... é…ç½®
```

## ğŸ“ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æ¨¡å—

1. åœ¨ `lib/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„ `.sh` æ–‡ä»¶
2. å®šä¹‰ç›¸å…³å‡½æ•°
3. åœ¨ä¸»è„šæœ¬ä¸­ä½¿ç”¨ `source` åŠ è½½

### æ·»åŠ æ–°åŠŸèƒ½

1. åœ¨å¯¹åº”æ¨¡å—ä¸­æ·»åŠ å‡½æ•°
2. åœ¨ä¸»è„šæœ¬ä¸­è°ƒç”¨å‡½æ•°
3. æ›´æ–°æ–‡æ¡£

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ”— ç›¸å…³é“¾æ¥

- [HummingBot å®˜æ–¹æ–‡æ¡£](https://docs.hummingbot.org/)
- [Docker Compose æ–‡æ¡£](https://docs.docker.com/compose/)
- [tmux ä½¿ç”¨æŒ‡å—](https://tmuxcheatsheet.com/)
